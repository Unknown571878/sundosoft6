<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>기본 지도</title>
    <!-- Leaflet CSS 파일 포함 -->
    <link rel="stylesheet" href="/css/mapOptionLayer.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script type="text/javascript"
            src="https://map.vworld.kr/js/vworldMapInit.js.do?version=2.0&apiKey=8A69FB7A-6E07-3B76-B2F2-1D1FEF0E5781"></script>
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://map.vworld.kr/jquery/ol3/jquery-1.11.3.min.js" async></script>
    <style>
        /* 지도 크기 설정 */
        #map {
            height: 950px; /* 지도 높이 */
        }
    </style>
</head>
<body>
<!-- 지도 표시할 요소 -->
<div class="ft">
    <!--  <input type="hidden" th:value="${id}" id='hidden-map'> !-->
    <div class="main-map">
        <div class="map" id="map"><!--th:id="${id}" !-->
            <th:block th:replace="layout/mapLayout :: mapLayout"></th:block>
        </div>
    </div>
</div>
<div id="scale-line"></div>
<!-- Leaflet JS 파일 포함 -->
<script th:src="${scriptPath}" th:text="${scriptPath}"></script>

<!-- Leaflet JS 파일 포함 -->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<script>

    const vworldKey = '8A69FB7A-6E07-3B76-B2F2-1D1FEF0E5781';

    document.addEventListener("DOMContentLoaded", function () {
        // 모든 상위 메뉴 항목을 선택
        const menuItems = document.querySelectorAll(".submenu-item");

        menuItems.forEach((menuItem) => {
            // 다음 형제 요소가 <ul>인지 확인
            const submenu = menuItem.nextElementSibling;

            if (submenu && submenu.tagName === "UL") {
                // 하위 메뉴의 <li> 개수 카운트
                const itemCount = submenu.querySelectorAll("li").length;

                // 카운트 뱃지 생성
                const badge = document.createElement("span");
                badge.className = "menu-badge";
                badge.textContent = itemCount;

                // 메뉴 항목에 뱃지를 추가
                menuItem.appendChild(badge);
            }
        });
    });

    const draggableList = document.getElementById('draggable-checkbox-list'); // 드래그 가능한 리스트 요소 가져오기
    let draggedItem = null; // 드래그 중인 항목
    let placeholder = null; // 플레이스홀더 요소
    let layer_list = [];
    const categoryButton = document.querySelectorAll('#category-button button');
    const submenuList = document.querySelectorAll('#submenu-list li');
    const submenuList2 = document.querySelectorAll('#submenu-list2 li');

    // 각 버튼에 클릭 이벤트 추가
    categoryButton.forEach((button) => {
        button.addEventListener('click', () => {
            const category = button.id.replace('category-', '');
            if (category === 'all') {
                // "전체" 버튼 클릭 시 모든 li 표시
                submenuList.forEach((li) => li.classList.remove('hidden'));
                submenuList2.forEach((li) => li.classList.remove('hidden'));
            } else {
                // 모든 li 숨기기
                submenuList.forEach((li) => {
                    if (li.id.includes(category)) {
                        li.classList.remove('hidden'); // 선택된 카테고리는 표시
                    } else {
                        li.classList.add('hidden'); // 나머지는 숨기기
                    }
                });
                submenuList2.forEach((li) => {
                    if (li.id.includes(category)) {
                        li.classList.remove('hidden'); // 선택된 카테고리는 표시
                    } else {
                        li.classList.add('hidden'); // 나머지는 숨기기
                    }
                });
            }
        });
    });
    // 드래그 앤 드롭 이벤트 처리
    draggableList.addEventListener('dragstart', (e) => {
        if (e.target.tagName === 'LI') { // 드래그가 LI 요소에서 시작될 때만 실행
            draggedItem = e.target; // 드래그 중인 항목 저장
            draggedItem.classList.add('dragging'); // 드래그 중인 항목에 스타일 추가
            placeholder = document.createElement('li'); // 플레이스홀더 생성
            placeholder.className = 'placeholder'; // 플레이스홀더 스타일 클래스 추가
            e.target.parentNode.insertBefore(placeholder, e.target.nextSibling); // 플레이스홀더를 드래그 항목 아래에 추가
        }
    });
    draggableList.addEventListener('dragover', (e) => {
        e.preventDefault(); // 기본 동작 방지
        const draggingOverItem = e.target.closest('li'); // 드래그 중인 항목 탐지
        if (draggingOverItem && draggingOverItem !== placeholder && draggingOverItem !== draggedItem) { // 유효한 항목일 경우
            const bounding = draggingOverItem.getBoundingClientRect(); // 항목의 위치 정보 가져오기
            const offset = e.clientY - bounding.top; // 마우스 위치 계산
            if (offset > bounding.height / 2) { // 마우스가 항목의 하단에 위치한 경우
                draggingOverItem.after(placeholder); // 플레이스홀더를 항목 뒤로 이동
            } else { // 상단에 위치한 경우
                draggingOverItem.before(placeholder); // 플레이스홀더를 항목 앞으로 이동
            }
        }
    });

    const layer_invisible = document.getElementById('layer-invisible');
    const check_layer = document.getElementById('check-layer');
    const layer_cancel = document.getElementById('layer-cancel');

    layer_cancel.addEventListener('click', ()=>{
        if (check_layer.style.display === 'block' || check_layer.style.display === '') {
            check_layer.style.display = 'none';
        }
    });
    layer_invisible.addEventListener('click', () => {
        if (check_layer.style.display === 'block' || check_layer.style.display === '') {
            check_layer.style.display = 'none'; // 안 보이게 설정
        }
        else if (check_layer.style.display === 'none') {
            check_layer.style.display = 'block'; // 보이게 설정

        }
    });
    const layer_names = [
        { id: 'gwangju_digital_B00_14118', name: '가건물' },
        { id: 'gwangju_digital_B00_14311', name: '공장' },
        { id: 'gwangju_digital_B00_14216', name: '구청' },
        { id: 'gwangju_digital_B00_14215', name: '군청' },
        { id: 'gwangju_digital_B00_14219', name: '면사무소' },
        { id: 'gwangju_digital_B00_14116', name: '무벽건물' },
        { id: 'gwangju_digital_B00_14221', name: '법원' },
        { id: 'gwangju_digital_B00_14233', name: '세무서' },
        { id: 'gwangju_digital_B00_14324', name: '시장경계' },
        { id: 'gwangju_digital_B00_14214', name: '시청' },
        { id: 'gwangju_digital_B00_14115', name: '아파트' },
        { id: 'gwangju_digital_B00_14113', name: '연립주택' },
        { id: 'gwangju_digital_B00_14117', name: '온실' },
        { id: 'gwangju_digital_B00_14235', name: '우체국' },
        { id: 'gwangju_digital_B00_14217', name: '읍사무소' },
        { id: 'gwangju_digital_B00_14611', name: '일반병원' },
        { id: 'gwangju_digital_B00_14218', name: '주민센터' },
        { id: 'gwangju_digital_B00_14112', name: '주택' },
        { id: 'gwangju_digital_B00_14111', name: '주택외건물' },
        { id: 'gwangju_digital_B00_14524', name: '창고' },
        { id: 'gwangju_digital_B00_14224', name: '파출소' },
        { id: 'gwangju_digital_B00_14411', name: '학교' },
        { id: 'gwangju_digital_B00_14511', name: '호텔' },
        { id: 'gwangju_digital_B00_24120', name: '담장(미분류)' },
        { id: 'gwangju_digital_B00_24127', name: '문주' },
        { id: 'gwangju_digital_G00_22312', name: '모래' },
        { id: 'gwangju_digital_G00_22322', name: '모래기호' },
        { id: 'gwangju_digital_G00_22313', name: '습지' },
        { id: 'gwangju_digital_G00_22323', name: '습지기호' },
        { id: 'gwangju_digital_G00_38210', name: '(산업지역경계)미분류' },
        { id: 'gwangju_digital_G00_38232', name: '관광단지' },
        { id: 'gwangju_digital_G00_37214', name: '너덜바위' },
        { id: 'gwangju_digital_G00_38231', name: '문화제보호구역' },
        { id: 'gwangju_digital_G00_37213', name: '벼랑바위' },
        { id: 'gwangju_digital_G00_38233', name: '위락단지' },
        { id: 'gwangju_digital_G00_38214', name: '축산단지' },
        { id: 'gwangju_digital_A00_13111', name: '(기본도로)고속국도' },
        { id: 'gwangju_digital_A00_13116', name: '(기본도로)군도' },
        { id: 'gwangju_digital_A00_13117', name: '(기본도로)면리간도로' },
        { id: 'gwangju_digital_A00_13115', name: '(기본도로)시도' },
        { id: 'gwangju_digital_A00_13112', name: '(기본도로)일반국도' },
        { id: 'gwangju_digital_A00_13113', name: '(기본도로)지방도' },
        { id: 'gwangju_digital_A00_13114', name: '(기본도로)특별시도, 광역시도' },
        { id: 'gwangju_digital_A00_13431', name: '(도로번호-기호)고속국도' },
        { id: 'gwangju_digital_A00_13432', name: '(도로번호-기호)일반국도' },
        { id: 'gwangju_digital_A00_13433', name: '(도로번호-기호)지방도' },
        { id: 'gwangju_digital_A00_13118', name: '부지안도로' },
        { id: 'gwangju_digital_A00_23211', name: '고속국도' },
        { id: 'gwangju_digital_A00_23216', name: '군도' },
        { id: 'gwangju_digital_A00_23217', name: '면리간도' },
        { id: 'gwangju_digital_A00_23119', name: '소로' },
        { id: 'gwangju_digital_A00_23215', name: '시도' },
        { id: 'gwangju_digital_A00_23212', name: '일반국도' },
        { id: 'gwangju_digital_A00_23213', name: '지방도' },
        { id: 'gwangju_digital_A00_23214', name: '특별시도,광역시도' },
        { id: 'gwangju_digital_A00_33324', name: '인도' },
        { id: 'gwangju_digital_A00_33327', name: '자전거도로' },
        { id: 'gwangju_digital_A00_43325', name: '횡단보도' },
        { id: 'gwangju_digital_A00_53326', name: '안전지대' },
        { id: 'gwangju_digital_A00_63321', name: '육교' },
        { id: 'gwangju_digital_A00_73340', name: '다리' },
        { id: 'gwangju_digital_A00_71210', name: '철교' },
        { id: 'gwangju_digital_A00_93351', name: '고가차도' },
        { id: 'gwangju_digital_A00_93352', name: '지하차도' },
        { id: 'gwangju_digital_E00_22112', name: '세류' },
        { id: 'gwangju_digital_E00_22115', name: '하천중심선' },
        { id: 'gwangju_digital_E00_32111', name: '실폭하천' },
        { id: 'gwangju_digital_E00_42326', name: '유수방향' },
        { id: 'gwangju_digital_E00_52114', name: '호수,저수지' },
        { id: 'gwangju_digital_E00_62273', name: '용수로' },
        { id: 'gwangju_digital_C00_32254', name: '선착장' },
        { id: 'gwangju_digital_C00_52221', name: '콘크리트방조제(상단)' },
        { id: 'gwangju_digital_C00_52211', name: '콘크리트제방(상단)' },
        { id: 'gwangju_digital_C00_52212', name: '콘크리트제방(하단)' },
        { id: 'gwangju_digital_C00_62242', name: '배수갑문' },
        { id: 'gwangju_digital_C00_62243', name: '보' },
        { id: 'gwangju_digital_C00_62241', name: '수문' },
        { id: 'gwangju_digital_C00_76116', name: '암거' },
        { id: 'gwangju_digital_C00_76117', name: '측구' },
        { id: 'gwangju_digital_C00_96311', name: '우물' },
        { id: 'gwangju_digital_D00_15213', name: '과수원' },
        { id: 'gwangju_digital_D00_15211', name: '논' },
        { id: 'gwangju_digital_D00_15212', name: '밭' },
        { id: 'gwangju_digital_D00_25111', name: '지류계' },
        { id: 'gwangju_digital_D00_45214', name: '목장' },
        { id: 'gwangju_digital_H00_17334', name: '도곽' },
        { id: 'gwangju_digital_H00_27311', name: '삼각점' },
        { id: 'gwangju_digital_H00_27312', name: '수준점' },
        { id: 'gwangju_digital_H00_27313', name: '통합기준점' },
        { id: 'gwangju_digital_F00_17114', name: '(볼록지)계곡선' },
        { id: 'gwangju_digital_F00_17111', name: '(볼록지)주곡선' },
        { id: 'gwangju_digital_F00_17124', name: '(오목지)계곡선' },
        { id: 'gwangju_digital_F00_17121', name: '(오목지)주곡선' },
        { id: 'gwangju_digital_F00_27217', name: '표고점' },
        { id: 'gwangju_digital_F00_37221', name: '성토(상단)' },
        { id: 'gwangju_digital_F00_37223', name: '성토(하단)' },
        { id: 'gwangju_digital_F00_37222', name: '절토(상단)' },
        { id: 'gwangju_digital_F00_47224', name: '콘크리트옹벽(상단)' },
        { id: 'gwangju_digital_F00_47225', name: '콘크리트옹벽(하단)' },
        { id: 'gwangju_population_10c', name: '초등학생' },
        { id: 'gwangju_population_10j', name: '중학생' },
        { id: 'gwangju_population_10g', name: '고등학생' },
        { id: 'gwangju_population_20y', name: '20대' },
        { id: 'gwangju_population_30y', name: '30대' },
        { id: 'gwangju_population_40y', name: '40대' },
        { id: 'gwangju_population_50y', name: '50대' },
        { id: 'gwangju_population_60y', name: '60대' },
        { id: 'gwangju_population_70y', name: '70대' },
        { id: 'gwangju_population_80y', name: '80대' },
        { id: 'gwangju_population_90y', name: '90대' },
        { id: 'gwangju_population_all', name: '모든연령대' },
        { id: 'gwangju_dong', name: '동별' },
        { id: 'gwangju_gu', name: '구별' },
        { id: 'gwangju_library', name: '도서관' },
        { id: 'gwangju_toji_use_1110', name: '경지정리답' },
        { id: 'gwangju_toji_use_1120', name: '미경지정리답' },
        { id: 'gwangju_toji_use_1210', name: '보통,특수작물' },
        { id: 'gwangju_toji_use_1220', name: '과수원 기타' },
        { id: 'gwangju_toji_use_2110', name: '자연초지' },
        { id: 'gwangju_toji_use_2120', name: '인공초지' },
        { id: 'gwangju_toji_use_2210', name: '침엽수림' },
        { id: 'gwangju_toji_use_2220', name: '활엽수림' },
        { id: 'gwangju_toji_use_2230', name: '혼합수림' },
        { id: 'gwangju_toji_use_2310', name: '골프장' },
        { id: 'gwangju_toji_use_2320', name: '공원묘지' },
        { id: 'gwangju_toji_use_2330', name: '유원지' },
        { id: 'gwangju_toji_use_3110', name: '일반주택지' },
        { id: 'gwangju_toji_use_3120', name: '고층주택지' },
        { id: 'gwangju_toji_use_3130', name: '상업,업무지' },
        { id: 'gwangju_toji_use_3140', name: '나대지 및 인공녹지' },
        { id: 'gwangju_toji_use_3210', name: '도로' },
        { id: 'gwangju_toji_use_3220', name: '철로 및 주변지역' },
        { id: 'gwangju_toji_use_3230', name: '공항' },
        { id: 'gwangju_toji_use_3310', name: '공업시설' },
        { id: 'gwangju_toji_use_3320', name: '공업나지, 기타' },
        { id: 'gwangju_toji_use_3410', name: '발전시설' },
        { id: 'gwangju_toji_use_3420', name: '처리장' },
        { id: 'gwangju_toji_use_3430', name: '교육, 군사시설' },
        { id: 'gwangju_toji_use_3440', name: '공공용지' },
        { id: 'gwangju_toji_use_3510', name: '양어장, 양식장' },
        { id: 'gwangju_toji_use_3520', name: '채광지역' },
        { id: 'gwangju_toji_use_3530', name: '매립지' },
        { id: 'gwangju_toji_use_3550', name: '가축사육시설' },
        { id: 'gwangju_toji_use_4210', name: '하천' },
        { id: 'gwangju_toji_use_4310', name: '호, 소' },
        { id: 'gwangju_toji_use_4320', name: '댐' },
        { id: 'gwangju_toji_owner_00', name: '일본인, 창씨명등' },
        { id: 'gwangju_toji_owner_01', name: '개인' },
        { id: 'gwangju_toji_owner_02', name: '국유지' },
        { id: 'gwangju_toji_owner_03', name: '외국인,외국공공기관' },
        { id: 'gwangju_toji_owner_04', name: '시, 도유지' },
        { id: 'gwangju_toji_owner_05', name: '군유지' },
        { id: 'gwangju_toji_owner_06', name: '법인' },
        { id: 'gwangju_toji_owner_07', name: '종증' },
        { id: 'gwangju_toji_owner_08', name: '종교단체' },
        { id: 'gwangju_toji_owner_09', name: '기타' },
        { id: 'gwangju_civil_service_machines', name: '민원 발급기' },
        { id: 'gwangju_pub_wifi', name: '공공와이파이' },
        { id: 'gwangju_gtr', name: '교통현황' },
        { id: 'gawangju_gm', name: '통합' },
        { id: 'gawangju_gm_ggy', name: '공공용' },
        { id: 'gawangju_gm_gyy', name: '공업용' },
        { id: 'gawangju_gm_nssy', name: '농수산용' },
        { id: 'gawangju_gm_mgshy', name: '문교사회용' },
        { id: 'gawangju_gm_syy', name: '상업용' },
        { id: 'gawangju_gm_jgy', name: '주거용' },
        { id: 'gawangju_gm_gt', name: '기타' },
        { id: 'cheonan_population_10c', name: '초등학생' },
        { id: 'cheonan_population_10j', name: '중학생' },
        { id: 'cheonan_population_10g', name: '고등학생' },
        { id: 'cheonan_population_20', name: '20대' },
        { id: 'cheonan_population_30', name: '30대' },
        { id: 'cheonan_population_40', name: '40대' },
        { id: 'cheonan_population_50', name: '50대' },
        { id: 'cheonan_population_60', name: '60대' },
        { id: 'cheonan_population_70', name: '70대' },
        { id: 'cheonan_population_80', name: '80대' },
        { id: 'cheonan_population_90', name: '90대' },
        { id: 'cheonan_population_all', name: '모든연령대' },
        { id: 'cheonan_si', name: '전체' },
        { id: 'cheonan_toji_character_live', name: '거주' },
        { id: 'cheonan_toji_character_industry', name: '공업' },
        { id: 'cheonan_toji_character_management', name: '관리지역' },
        { id: 'cheonan_toji_character_etc', name: '기타' },
        { id: 'cheonan_toji_character_green', name: '녹지' },
        { id: 'cheonan_toji_character_agriculture', name: '농림' },
        { id: 'cheonan_toji_character_road', name: '도로' },
        { id: 'cheonan_toji_character_mercantile', name: '상업' },
        { id: 'cheonan_toji_character_preservation', name: '환경보전' },
        { id: 'cheonan_toji_owner_00', name: '일본인, 창씨명등' },
        { id: 'cheonan_toji_owner_01', name: '개인' },
        { id: 'cheonan_toji_owner_02', name: '국유지' },
        { id: 'cheonan_toji_owner_03', name: '외국인,외국공공기관' },
        { id: 'cheonan_toji_owner_04', name: '시, 도유지' },
        { id: 'cheonan_toji_owner_05', name: '군유지' },
        { id: 'cheonan_toji_owner_06', name: '법인' },
        { id: 'cheonan_toji_owner_07', name: '종증' },
        { id: 'cheonan_toji_owner_08', name: '종교단체' },
        { id: 'cheonan_toji_owner_09', name: '기타' },
        { id: 'cheonan_toji_use_1110', name: '경지정리답' },
        { id: 'cheonan_toji_use_1120', name: '미경지정리답' },
        { id: 'cheonan_toji_use_1210', name: '보통,특수작물' },
        { id: 'cheonan_toji_use_1220', name: '과수원 기타' },
        { id: 'cheonan_toji_use_2110', name: '자연초지' },
        { id: 'cheonan_toji_use_2120', name: '인공초지' },
        { id: 'cheonan_toji_use_2210', name: '침엽수림' },
        { id: 'cheonan_toji_use_2220', name: '활엽수림' },
        { id: 'cheonan_toji_use_2230', name: '혼합수림' },
        { id: 'cheonan_toji_use_2310', name: '골프장' },
        { id: 'cheonan_toji_use_2320', name: '공원묘지' },
        { id: 'cheonan_toji_use_2330', name: '유원지' },
        { id: 'cheonan_toji_use_2340', name: '압벽 및 석산' },
        { id: 'cheonan_toji_use_3110', name: '일반주택지' },
        { id: 'cheonan_toji_use_3120', name: '고층주택지' },
        { id: 'cheonan_toji_use_3130', name: '상업,업무지' },
        { id: 'cheonan_toji_use_3140', name: '나대지 및 인공녹지' },
        { id: 'cheonan_toji_use_3210', name: '도로' },
        { id: 'cheonan_toji_use_3220', name: '철로 및 주변지역' },
        { id: 'cheonan_toji_use_3310', name: '공업시설' },
        { id: 'cheonan_toji_use_3320', name: '공업나지, 기타' },
        { id: 'cheonan_toji_use_3410', name: '발전시설' },
        { id: 'cheonan_toji_use_3420', name: '처리장' },
        { id: 'cheonan_toji_use_3430', name: '교육, 군사시설' },
        { id: 'cheonan_toji_use_3440', name: '공공용지' },
        { id: 'cheonan_toji_use_3510', name: '양어장, 양식장' },
        { id: 'cheonan_toji_use_3520', name: '채광지역' },
        { id: 'cheonan_toji_use_3530', name: '매립지' },
        { id: 'cheonan_toji_use_3550', name: '가축사육시설' },
        { id: 'cheonan_toji_use_4210', name: '하천' },
        { id: 'cheonan_toji_use_4310', name: '호, 소' },
        { id: 'cheonan_library_20240610', name: '도서관' },
        { id: 'cheonan_shd_20240610', name: '신호등' },
        { id: 'cheonan_dng_gm', name: '동남구' },
        { id: 'cheonan_sbg_gm', name: '서북구' },
        { id: 'cheonan_pub_wifi', name: '공공와이파이' },
        { id: 'cheonan_civil_service_machines', name: '무인발급기' },
        { id: 'cheonan_digital_B00_14118', name: '가건물' },
        { id: 'cheonan_digital_B00_14311', name: '공장' },
        { id: 'cheonan_digital_B00_14216', name: '구청' },
        { id: 'cheonan_digital_B00_14219', name: '면사무소' },
        { id: 'cheonan_digital_B00_14116', name: '무벽건물' },
        { id: 'cheonan_digital_B00_14221', name: '법원' },
        { id: 'cheonan_digital_B00_14234', name: '세관' },
        { id: 'cheonan_digital_B00_14333', name: '세무서' },
        { id: 'cheonan_digital_B00_14324', name: '시장' },
        { id: 'cheonan_digital_B00_14115', name: '아파트' },
        { id: 'cheonan_digital_B00_14113', name: '연립주택' },
        { id: 'cheonan_digital_B00_14117', name: '온실' },
        { id: 'cheonan_digital_B00_14235', name: '우체국' },
        { id: 'cheonan_digital_B00_14217', name: '읍사무소' },
        { id: 'cheonan_digital_B00_14611', name: '일반병원' },
        { id: 'cheonan_digital_B00_14218', name: '주민센터' },
        { id: 'cheonan_digital_B00_14112', name: '주택' },
        { id: 'cheonan_digital_B00_14111', name: '주택외건물' },
        { id: 'cheonan_digital_B00_14524', name: '창고' },
        { id: 'cheonan_digital_B00_14224', name: '파출소' },
        { id: 'cheonan_digital_B00_14411', name: '학교' },
        { id: 'cheonan_digital_B00_14511', name: '호텔' },
        { id: 'cheonan_digital_B00_24120', name: '담장(미분류)' },
        { id: 'cheonan_digital_B00_24127', name: '문주' },
        { id: 'cheonan_digital_G00_22312', name: '모래' },
        { id: 'cheonan_digital_G00_22322', name: '모래기호' },
        { id: 'cheonan_digital_G00_22313', name: '습지' },
        { id: 'cheonan_digital_G00_22323', name: '습지기호' },
        { id: 'cheonan_digital_G00_38210', name: '(산업지역경계)미분류' },
        { id: 'cheonan_digital_G00_38232', name: '관광단지' },
        { id: 'cheonan_digital_G00_37214', name: '너덜바위' },
        { id: 'cheonan_digital_G00_38231', name: '문화제보호구역' },
        { id: 'cheonan_digital_G00_37213', name: '벼랑바위' },
        { id: 'cheonan_digital_G00_38233', name: '위락단지' },
        { id: 'cheonan_digital_G00_38214', name: '축산단지' },
        { id: 'cheonan_digital_H00_17334', name: '도곽' },
        { id: 'cheonan_digital_H00_27311', name: '삼각점' },
        { id: 'cheonan_digital_H00_27312', name: '수준점' },
        { id: 'cheonan_digital_H00_27313', name: '통합기준점' },
        { id: 'cheonan_digital_F00_17114', name: '(볼록지)계곡선' },
        { id: 'cheonan_digital_F00_17111', name: '(볼록지)주곡선' },
        { id: 'cheonan_digital_F00_17124', name: '(오목지)계곡선' },
        { id: 'cheonan_digital_F00_17121', name: '(오목지)주곡선' },
        { id: 'cheonan_digital_F00_27217', name: '표고점' },
        { id: 'cheonan_digital_F00_37221', name: '성토(상단)' },
        { id: 'cheonan_digital_F00_37223', name: '성토(하단)' },
        { id: 'cheonan_digital_F00_37222', name: '절토(상단)' },
        { id: 'cheonan_digital_F00_47224', name: '콘크리트옹벽(상단)' },
        { id: 'cheonan_digital_F00_47225', name: '콘크리트옹벽(하단)' },
        { id: 'cheonan_digital_E00_32111', name: '실폭하천' },
        { id: 'cheonan_digital_E00_62271', name: '공업용수로(지상)' },
        { id: 'cheonan_digital_E00_62273', name: '농업용수로(지상)' },
        { id: 'cheonan_digital_E00_42326', name: '유수방향' },
        { id: 'cheonan_digital_E00_22112', name: '세류' },
        { id: 'cheonan_digital_E00_22115', name: '하천중심선' },
        { id: 'cheonan_digital_E00_52114', name: '호수/저수지' },
        { id: 'cheonan_digital_C00_62242', name: '배수갑문' },
        { id: 'cheonan_digital_C00_62243', name: '보' },
        { id: 'cheonan_digital_C00_62241', name: '수문' },
        { id: 'cheonan_digital_C00_76116', name: '암거' },
        { id: 'cheonan_digital_C00_76117', name: '측구' },
        { id: 'cheonan_digital_C00_96311', name: '우물' },
        { id: 'cheonan_digital_C00_52231', name: '방파제(상단)' },
        { id: 'cheonan_digital_C00_52211', name: '콘크리트제방(상단)' },
        { id: 'cheonan_digital_C00_52212', name: '콘크리트제방(하단)' },
        { id: 'cheonan_digital_D00_15213', name: '과수원' },
        { id: 'cheonan_digital_D00_15211', name: '논' },
        { id: 'cheonan_digital_D00_15212', name: '밭' },
        { id: 'cheonan_digital_D00_45214', name: '목초지' },
        { id: 'cheonan_digital_D00_25111', name: '지류계' },
        { id: 'cheonan_digital_A00_73340', name: '(다리)미분류' },
        { id: 'cheonan_digital_A00_71211', name: '철교' },
        { id: 'cheonan_digital_A00_71213', name: '철도터널' },
        { id: 'cheonan_digital_A00_13111', name: '(기존도로)고속국도' },
        { id: 'cheonan_digital_A00_13116', name: '(기존도로)군도' },
        { id: 'cheonan_digital_A00_13117', name: '(기존도로)면리간도로' },
        { id: 'cheonan_digital_A00_13115', name: '(기존도로)시도' },
        { id: 'cheonan_digital_A00_13112', name: '(기존도로)일반국도' },
        { id: 'cheonan_digital_A00_13113', name: '(기존도로)지방도' },
        { id: 'cheonan_digital_A00_13431', name: '(도로번호-기호)고속국도' },
        { id: 'cheonan_digital_A00_13432', name: '(도로번호-기호)일반국도' },
        { id: 'cheonan_digital_A00_13433', name: '(도로번호-기호)지방도' },
        { id: 'cheonan_digital_A00_13118', name: '부지안도로' },
        { id: 'cheonan_digital_A00_23211', name: '(도로중심선)고속국도' },
        { id: 'cheonan_digital_A00_23216', name: '(도로중심선)군도' },
        { id: 'cheonan_digital_A00_23217', name: '(도로중심선)면리간도로' },
        { id: 'cheonan_digital_A00_23215', name: '(도로중심선)시도' },
        { id: 'cheonan_digital_A00_23212', name: '(도로중심선)일반국도' },
        { id: 'cheonan_digital_A00_23213', name: '(도로중심선)지방도' },
        { id: 'cheonan_digital_A00_23119', name: '소로' },
        { id: 'cheonan_digital_A00_53326', name: '안전지대' },
        { id: 'cheonan_digital_A00_63321', name: '육교' },
        { id: 'cheonan_digital_A00_33324', name: '인도' },
        { id: 'cheonan_digital_A00_33327', name: '자전거도로' },
        { id: 'cheonan_digital_A00_93351', name: '(입체교차부)고가차도' },
        { id: 'cheonan_digital_A00_93352', name: '(입체교차부)지하차도' },
        { id: 'cheonan_digital_A00_43325', name: '횡단보도' }
    ];
    // 레이어의 인덱스와 체크박스의 ID를 배열로 정의
    const layers = [
        { id: 'gwangju_dong', layerIndex: 1 },
        { id: 'gwangju_gu', layerIndex: 2 },
        { id: 'gwangju_population_10c', layerIndex: 3 },
        { id: 'gwangju_population_10j', layerIndex: 4 },
        { id: 'gwangju_population_10g', layerIndex: 5 },
        { id: 'gwangju_population_20y', layerIndex: 6 },
        { id: 'gwangju_population_30y', layerIndex: 7 },
        { id: 'gwangju_population_40y', layerIndex: 8 },
        { id: 'gwangju_population_50y', layerIndex: 9 },
        { id: 'gwangju_population_60y', layerIndex: 10 },
        { id: 'gwangju_population_70y', layerIndex: 11 },
        { id: 'gwangju_population_80y', layerIndex: 12 },
        { id: 'gwangju_population_90y', layerIndex: 13 },
        { id: 'gwangju_population_all', layerIndex: 14 },
        { id: 'gwangju_toji_use_1110', layerIndex: 15 },
        { id: 'gwangju_toji_use_1120', layerIndex: 16 },
        { id: 'gwangju_toji_use_1210', layerIndex: 17 },
        { id: 'gwangju_toji_use_1220', layerIndex: 18 },
        { id: 'gwangju_toji_use_2110', layerIndex: 19 },
        { id: 'gwangju_toji_use_2120', layerIndex: 20 },
        { id: 'gwangju_toji_use_2210', layerIndex: 21 },
        { id: 'gwangju_toji_use_2220', layerIndex: 22 },
        { id: 'gwangju_toji_use_2230', layerIndex: 23 },
        { id: 'gwangju_toji_use_2310', layerIndex: 24 },
        { id: 'gwangju_toji_use_2320', layerIndex: 25 },
        { id: 'gwangju_toji_use_2330', layerIndex: 26 },
        { id: 'gwangju_toji_use_3110', layerIndex: 27 },
        { id: 'gwangju_toji_use_3120', layerIndex: 28 },
        { id: 'gwangju_toji_use_3130', layerIndex: 29 },
        { id: 'gwangju_toji_use_3140', layerIndex: 30 },
        { id: 'gwangju_toji_use_3210', layerIndex: 31 },
        { id: 'gwangju_toji_use_3220', layerIndex: 32 },
        { id: 'gwangju_toji_use_3230', layerIndex: 33 },
        { id: 'gwangju_toji_use_3310', layerIndex: 34 },
        { id: 'gwangju_toji_use_3320', layerIndex: 35 },
        { id: 'gwangju_toji_use_3410', layerIndex: 36 },
        { id: 'gwangju_toji_use_3420', layerIndex: 37 },
        { id: 'gwangju_toji_use_3430', layerIndex: 38 },
        { id: 'gwangju_toji_use_3440', layerIndex: 39 },
        { id: 'gwangju_toji_use_3510', layerIndex: 40 },
        { id: 'gwangju_toji_use_3520', layerIndex: 41 },
        { id: 'gwangju_toji_use_3530', layerIndex: 42 },
        { id: 'gwangju_toji_use_3550', layerIndex: 43 },
        { id: 'gwangju_toji_use_4210', layerIndex: 44 },
        { id: 'gwangju_toji_use_4310', layerIndex: 45 },
        { id: 'gwangju_toji_use_4320', layerIndex: 46 },
        { id: 'gwangju_toji_owner_00', layerIndex: 47 },
        { id: 'gwangju_toji_owner_01', layerIndex: 48 },
        { id: 'gwangju_toji_owner_02', layerIndex: 49 },
        { id: 'gwangju_toji_owner_03', layerIndex: 50 },
        { id: 'gwangju_toji_owner_04', layerIndex: 51 },
        { id: 'gwangju_toji_owner_05', layerIndex: 52 },
        { id: 'gwangju_toji_owner_06', layerIndex: 53 },
        { id: 'gwangju_toji_owner_07', layerIndex: 54 },
        { id: 'gwangju_toji_owner_08', layerIndex: 55 },
        { id: 'gwangju_toji_owner_09', layerIndex: 56 },
        { id: 'gwangju_library', layerIndex: 57 },
        { id: 'gwangju_civil_service_machines', layerIndex: 58 },
        { id: 'gwangju_pub_wifi', layerIndex: 59 },
        { id: 'gwangju_gtr', layerIndex: 60 },
        { id: 'gawangju_gm', layerIndex: 61 },
        { id: 'gawangju_gm_ggy', layerIndex: 62 },
        { id: 'gawangju_gm_gyy', layerIndex: 63 },
        { id: 'gawangju_gm_nssy', layerIndex: 64 },
        { id: 'gawangju_gm_mgshy', layerIndex: 65 },
        { id: 'gawangju_gm_syy', layerIndex: 66 },
        { id: 'gawangju_gm_jgy', layerIndex: 67 },
        { id: 'gawangju_gm_gt', layerIndex: 68 },
        { id: 'gwangju_digital_B00_14118', layerIndex: 69 },
        { id: 'gwangju_digital_B00_14311', layerIndex: 70 },
        { id: 'gwangju_digital_B00_14216', layerIndex: 71 },
        { id: 'gwangju_digital_B00_14215', layerIndex: 72 },
        { id: 'gwangju_digital_B00_14219', layerIndex: 73 },
        { id: 'gwangju_digital_B00_14116', layerIndex: 74 },
        { id: 'gwangju_digital_B00_14221', layerIndex: 75 },
        { id: 'gwangju_digital_B00_14233', layerIndex: 76 },
        { id: 'gwangju_digital_B00_14324', layerIndex: 77 },
        { id: 'gwangju_digital_B00_14214', layerIndex: 78 },
        { id: 'gwangju_digital_B00_14115', layerIndex: 79 },
        { id: 'gwangju_digital_B00_14113', layerIndex: 80 },
        { id: 'gwangju_digital_B00_14117', layerIndex: 81 },
        { id: 'gwangju_digital_B00_14235', layerIndex: 82 },
        { id: 'gwangju_digital_B00_14217', layerIndex: 83 },
        { id: 'gwangju_digital_B00_14611', layerIndex: 84 },
        { id: 'gwangju_digital_B00_14218', layerIndex: 85 },
        { id: 'gwangju_digital_B00_14112', layerIndex: 86 },
        { id: 'gwangju_digital_B00_14111', layerIndex: 87 },
        { id: 'gwangju_digital_B00_14524', layerIndex: 88 },
        { id: 'gwangju_digital_B00_14224', layerIndex: 89 },
        { id: 'gwangju_digital_B00_14411', layerIndex: 90 },
        { id: 'gwangju_digital_B00_14511', layerIndex: 91 },
        { id: 'gwangju_digital_B00_24120', layerIndex: 92 },
        { id: 'gwangju_digital_B00_24127', layerIndex: 93 },
        { id: 'gwangju_digital_G00_22312', layerIndex: 94 },
        { id: 'gwangju_digital_G00_22322', layerIndex: 95 },
        { id: 'gwangju_digital_G00_22313', layerIndex: 96 },
        { id: 'gwangju_digital_G00_22323', layerIndex: 97 },
        { id: 'gwangju_digital_G00_38210', layerIndex: 98 },
        { id: 'gwangju_digital_G00_38232', layerIndex: 99 },
        { id: 'gwangju_digital_G00_37214', layerIndex: 100 },
        { id: 'gwangju_digital_G00_38231', layerIndex: 101 },
        { id: 'gwangju_digital_G00_37213', layerIndex: 102 },
        { id: 'gwangju_digital_G00_38233', layerIndex: 103 },
        { id: 'gwangju_digital_G00_38214', layerIndex: 104 },
        { id: 'gwangju_digital_A00_13111', layerIndex: 105 },
        { id: 'gwangju_digital_A00_13116', layerIndex: 106 },
        { id: 'gwangju_digital_A00_13117', layerIndex: 107 },
        { id: 'gwangju_digital_A00_13115', layerIndex: 108 },
        { id: 'gwangju_digital_A00_13112', layerIndex: 109 },
        { id: 'gwangju_digital_A00_13113', layerIndex: 110 },
        { id: 'gwangju_digital_A00_13114', layerIndex: 111 },
        { id: 'gwangju_digital_A00_13431', layerIndex: 112 },
        { id: 'gwangju_digital_A00_13432', layerIndex: 113 },
        { id: 'gwangju_digital_A00_13433', layerIndex: 114 },
        { id: 'gwangju_digital_A00_13118', layerIndex: 115 },
        { id: 'gwangju_digital_A00_23211', layerIndex: 116 },
        { id: 'gwangju_digital_A00_23216', layerIndex: 117 },
        { id: 'gwangju_digital_A00_23217', layerIndex: 118 },
        { id: 'gwangju_digital_A00_23119', layerIndex: 119 },
        { id: 'gwangju_digital_A00_23215', layerIndex: 120 },
        { id: 'gwangju_digital_A00_23212', layerIndex: 121 },
        { id: 'gwangju_digital_A00_23213', layerIndex: 122 },
        { id: 'gwangju_digital_A00_23214', layerIndex: 123 },
        { id: 'gwangju_digital_A00_33324', layerIndex: 124 },
        { id: 'gwangju_digital_A00_33327', layerIndex: 125 },
        { id: 'gwangju_digital_A00_43325', layerIndex: 126 },
        { id: 'gwangju_digital_A00_53326', layerIndex: 127 },
        { id: 'gwangju_digital_A00_63321', layerIndex: 128 },
        { id: 'gwangju_digital_A00_73340', layerIndex: 129 },
        { id: 'gwangju_digital_A00_71210', layerIndex: 130 },
        { id: 'gwangju_digital_A00_93351', layerIndex: 131 },
        { id: 'gwangju_digital_A00_93352', layerIndex: 132 },
        { id: 'gwangju_digital_E00_22112', layerIndex: 133 },
        { id: 'gwangju_digital_E00_22115', layerIndex: 134 },
        { id: 'gwangju_digital_E00_32111', layerIndex: 135 },
        { id: 'gwangju_digital_E00_42326', layerIndex: 136 },
        { id: 'gwangju_digital_E00_52114', layerIndex: 137 },
        { id: 'gwangju_digital_E00_62273', layerIndex: 138 },
        { id: 'gwangju_digital_C00_32254', layerIndex: 139 },
        { id: 'gwangju_digital_C00_52221', layerIndex: 140 },
        { id: 'gwangju_digital_C00_52211', layerIndex: 141 },
        { id: 'gwangju_digital_C00_52212', layerIndex: 142 },
        { id: 'gwangju_digital_C00_62242', layerIndex: 143 },
        { id: 'gwangju_digital_C00_62243', layerIndex: 144 },
        { id: 'gwangju_digital_C00_62241', layerIndex: 145 },
        { id: 'gwangju_digital_C00_76116', layerIndex: 146 },
        { id: 'gwangju_digital_C00_76117', layerIndex: 147 },
        { id: 'gwangju_digital_C00_96311', layerIndex: 148 },
        { id: 'gwangju_digital_D00_15213', layerIndex: 149 },
        { id: 'gwangju_digital_D00_15211', layerIndex: 150 },
        { id: 'gwangju_digital_D00_15212', layerIndex: 151 },
        { id: 'gwangju_digital_D00_25111', layerIndex: 152 },
        { id: 'gwangju_digital_D00_45214', layerIndex: 153 },
        { id: 'gwangju_digital_H00_17334', layerIndex: 154 },
        { id: 'gwangju_digital_H00_27311', layerIndex: 155 },
        { id: 'gwangju_digital_H00_27312', layerIndex: 156 },
        { id: 'gwangju_digital_H00_27313', layerIndex: 157 },
        { id: 'gwangju_digital_F00_17114', layerIndex: 158 },
        { id: 'gwangju_digital_F00_17111', layerIndex: 159 },
        { id: 'gwangju_digital_F00_17124', layerIndex: 160 },
        { id: 'gwangju_digital_F00_17121', layerIndex: 161 },
        { id: 'gwangju_digital_F00_27217', layerIndex: 162 },
        { id: 'gwangju_digital_F00_37221', layerIndex: 163 },
        { id: 'gwangju_digital_F00_37223', layerIndex: 164 },
        { id: 'gwangju_digital_F00_37222', layerIndex: 165 },
        { id: 'gwangju_digital_F00_47224', layerIndex: 166 },
        { id: 'gwangju_digital_F00_47225', layerIndex: 167 },
        { id: 'cheonan_population_10c', layerIndex: 168 },
        { id: 'cheonan_population_10j', layerIndex: 169 },
        { id: 'cheonan_population_10g', layerIndex: 170 },
        { id: 'cheonan_population_20', layerIndex: 171 },
        { id: 'cheonan_population_30', layerIndex: 172 },
        { id: 'cheonan_population_40', layerIndex: 173 },
        { id: 'cheonan_population_50', layerIndex: 174 },
        { id: 'cheonan_population_60', layerIndex: 175 },
        { id: 'cheonan_population_70', layerIndex: 176 },
        { id: 'cheonan_population_80', layerIndex: 177 },
        { id: 'cheonan_population_90', layerIndex: 178 },
        { id: 'cheonan_population_all', layerIndex: 179 },
        { id: 'cheonan_si', layerIndex: 180 },
        { id: 'cheonan_toji_character_live', layerIndex: 181 },
        { id: 'cheonan_toji_character_industry', layerIndex: 182 },
        { id: 'cheonan_toji_character_management', layerIndex: 183 },
        { id: 'cheonan_toji_character_etc', layerIndex: 184 },
        { id: 'cheonan_toji_character_green', layerIndex: 185 },
        { id: 'cheonan_toji_character_agriculture', layerIndex: 186 },
        { id: 'cheonan_toji_character_road', layerIndex: 187 },
        { id: 'cheonan_toji_character_mercantile', layerIndex: 188 },
        { id: 'cheonan_toji_character_preservation', layerIndex: 189 },
        { id: 'cheonan_toji_owner_00', layerIndex: 190 },
        { id: 'cheonan_toji_owner_01', layerIndex: 191 },
        { id: 'cheonan_toji_owner_02', layerIndex: 192 },
        { id: 'cheonan_toji_owner_03', layerIndex: 193 },
        { id: 'cheonan_toji_owner_04', layerIndex: 194 },
        { id: 'cheonan_toji_owner_05', layerIndex: 195 },
        { id: 'cheonan_toji_owner_06', layerIndex: 196 },
        { id: 'cheonan_toji_owner_07', layerIndex: 197 },
        { id: 'cheonan_toji_owner_08', layerIndex: 198 },
        { id: 'cheonan_toji_owner_09', layerIndex: 199 },
        { id: 'cheonan_toji_use_1110', layerIndex: 200 },
        { id: 'cheonan_toji_use_1120', layerIndex: 201 },
        { id: 'cheonan_toji_use_1210', layerIndex: 202 },
        { id: 'cheonan_toji_use_1220', layerIndex: 203 },
        { id: 'cheonan_toji_use_2110', layerIndex: 204 },
        { id: 'cheonan_toji_use_2120', layerIndex: 205 },
        { id: 'cheonan_toji_use_2210', layerIndex: 206 },
        { id: 'cheonan_toji_use_2220', layerIndex: 207 },
        { id: 'cheonan_toji_use_2230', layerIndex: 208 },
        { id: 'cheonan_toji_use_2310', layerIndex: 209 },
        { id: 'cheonan_toji_use_2320', layerIndex: 210 },
        { id: 'cheonan_toji_use_2330', layerIndex: 211 },
        { id: 'cheonan_toji_use_2340', layerIndex: 212 },
        { id: 'cheonan_toji_use_3110', layerIndex: 213 },
        { id: 'cheonan_toji_use_3120', layerIndex: 214 },
        { id: 'cheonan_toji_use_3130', layerIndex: 215 },
        { id: 'cheonan_toji_use_3140', layerIndex: 216 },
        { id: 'cheonan_toji_use_3210', layerIndex: 217 },
        { id: 'cheonan_toji_use_3220', layerIndex: 218 },
        { id: 'cheonan_toji_use_3310', layerIndex: 219 },
        { id: 'cheonan_toji_use_3320', layerIndex: 220 },
        { id: 'cheonan_toji_use_3410', layerIndex: 221 },
        { id: 'cheonan_toji_use_3420', layerIndex: 222 },
        { id: 'cheonan_toji_use_3430', layerIndex: 223 },
        { id: 'cheonan_toji_use_3440', layerIndex: 224 },
        { id: 'cheonan_toji_use_3510', layerIndex: 225 },
        { id: 'cheonan_toji_use_3520', layerIndex: 226 },
        { id: 'cheonan_toji_use_3530', layerIndex: 227 },
        { id: 'cheonan_toji_use_3550', layerIndex: 228 },
        { id: 'cheonan_toji_use_4210', layerIndex: 229 },
        { id: 'cheonan_toji_use_4310', layerIndex: 230 },
        { id: 'cheonan_library_20240610', layerIndex: 231 },
        { id: 'cheonan_shd_20240610', layerIndex: 232 },
        { id: 'cheonan_dng_gm', layerIndex: 233 },
        { id: 'cheonan_sbg_gm', layerIndex: 234 },
        { id: 'cheonan_pub_wifi', layerIndex: 235 },
        { id: 'cheonan_civil_service_machines', layerIndex: 236 },
        { id: 'cheonan_digital_B00_14118', layerIndex: 237 },
        { id: 'cheonan_digital_B00_14311', layerIndex: 238 },
        { id: 'cheonan_digital_B00_14216', layerIndex: 239 },
        { id: 'cheonan_digital_B00_14219', layerIndex: 240 },
        { id: 'cheonan_digital_B00_14116', layerIndex: 241 },
        { id: 'cheonan_digital_B00_14221', layerIndex: 242 },
        { id: 'cheonan_digital_B00_14234', layerIndex: 243 },
        { id: 'cheonan_digital_B00_14333', layerIndex: 244 },
        { id: 'cheonan_digital_B00_14324', layerIndex: 245 },
        { id: 'cheonan_digital_B00_14115', layerIndex: 246 },
        { id: 'cheonan_digital_B00_14113', layerIndex: 247 },
        { id: 'cheonan_digital_B00_14117', layerIndex: 248 },
        { id: 'cheonan_digital_B00_14235', layerIndex: 249 },
        { id: 'cheonan_digital_B00_14217', layerIndex: 250 },
        { id: 'cheonan_digital_B00_14611', layerIndex: 251 },
        { id: 'cheonan_digital_B00_14218', layerIndex: 252 },
        { id: 'cheonan_digital_B00_14112', layerIndex: 253 },
        { id: 'cheonan_digital_B00_14111', layerIndex: 254 },
        { id: 'cheonan_digital_B00_14524', layerIndex: 255 },
        { id: 'cheonan_digital_B00_14224', layerIndex: 256 },
        { id: 'cheonan_digital_B00_14411', layerIndex: 257 },
        { id: 'cheonan_digital_B00_14511', layerIndex: 258 },
        { id: 'cheonan_digital_B00_24120', layerIndex: 259 },
        { id: 'cheonan_digital_B00_24127', layerIndex: 260 },
        { id: 'cheonan_digital_G00_22312', layerIndex: 261 },
        { id: 'cheonan_digital_G00_22322', layerIndex: 262 },
        { id: 'cheonan_digital_G00_22313', layerIndex: 263 },
        { id: 'cheonan_digital_G00_22323', layerIndex: 264 },
        { id: 'cheonan_digital_G00_38210', layerIndex: 265 },
        { id: 'cheonan_digital_G00_38232', layerIndex: 266 },
        { id: 'cheonan_digital_G00_37214', layerIndex: 267 },
        { id: 'cheonan_digital_G00_38231', layerIndex: 268 },
        { id: 'cheonan_digital_G00_37213', layerIndex: 269 },
        { id: 'cheonan_digital_G00_38233', layerIndex: 270 },
        { id: 'cheonan_digital_G00_38214', layerIndex: 271 },
        { id: 'cheonan_digital_H00_17334', layerIndex: 272 },
        { id: 'cheonan_digital_H00_27311', layerIndex: 273 },
        { id: 'cheonan_digital_H00_27312', layerIndex: 274 },
        { id: 'cheonan_digital_H00_27313', layerIndex: 275 },
        { id: 'cheonan_digital_F00_17114', layerIndex: 276 },
        { id: 'cheonan_digital_F00_17111', layerIndex: 277 },
        { id: 'cheonan_digital_F00_17124', layerIndex: 278 },
        { id: 'cheonan_digital_F00_17121', layerIndex: 279 },
        { id: 'cheonan_digital_F00_27217', layerIndex: 280 },
        { id: 'cheonan_digital_F00_37221', layerIndex: 281 },
        { id: 'cheonan_digital_F00_37223', layerIndex: 282 },
        { id: 'cheonan_digital_F00_37222', layerIndex: 283 },
        { id: 'cheonan_digital_F00_47224', layerIndex: 284 },
        { id: 'cheonan_digital_F00_47225', layerIndex: 285 },
        { id: 'cheonan_digital_E00_32111', layerIndex: 286 },
        { id: 'cheonan_digital_E00_62271', layerIndex: 287 },
        { id: 'cheonan_digital_E00_62273', layerIndex: 288 },
        { id: 'cheonan_digital_E00_42326', layerIndex: 289 },
        { id: 'cheonan_digital_E00_22112', layerIndex: 290 },
        { id: 'cheonan_digital_E00_22115', layerIndex: 291 },
        { id: 'cheonan_digital_E00_52114', layerIndex: 292 },
        { id: 'cheonan_digital_C00_62242', layerIndex: 293 },
        { id: 'cheonan_digital_C00_62243', layerIndex: 294 },
        { id: 'cheonan_digital_C00_62241', layerIndex: 295 },
        { id: 'cheonan_digital_C00_76116', layerIndex: 296 },
        { id: 'cheonan_digital_C00_76117', layerIndex: 297 },
        { id: 'cheonan_digital_C00_96311', layerIndex: 298 },
        { id: 'cheonan_digital_C00_52231', layerIndex: 299 },
        { id: 'cheonan_digital_C00_52211', layerIndex: 300 },
        { id: 'cheonan_digital_C00_52212', layerIndex: 301 },
        { id: 'cheonan_digital_D00_15213', layerIndex: 302 },
        { id: 'cheonan_digital_D00_15211', layerIndex: 303 },
        { id: 'cheonan_digital_D00_15212', layerIndex: 304 },
        { id: 'cheonan_digital_D00_45214', layerIndex: 305 },
        { id: 'cheonan_digital_D00_25111', layerIndex: 306 },
        { id: 'cheonan_digital_A00_73340', layerIndex: 307 },
        { id: 'cheonan_digital_A00_71211', layerIndex: 308 },
        { id: 'cheonan_digital_A00_71213', layerIndex: 309 },
        { id: 'cheonan_digital_A00_13111', layerIndex: 310 },
        { id: 'cheonan_digital_A00_13116', layerIndex: 311 },
        { id: 'cheonan_digital_A00_13117', layerIndex: 312 },
        { id: 'cheonan_digital_A00_13115', layerIndex: 313 },
        { id: 'cheonan_digital_A00_13112', layerIndex: 314 },
        { id: 'cheonan_digital_A00_13113', layerIndex: 315 },
        { id: 'cheonan_digital_A00_13431', layerIndex: 316 },
        { id: 'cheonan_digital_A00_13432', layerIndex: 317 },
        { id: 'cheonan_digital_A00_13433', layerIndex: 318 },
        { id: 'cheonan_digital_A00_13118', layerIndex: 319 },
        { id: 'cheonan_digital_A00_23211', layerIndex: 320 },
        { id: 'cheonan_digital_A00_23216', layerIndex: 321 },
        { id: 'cheonan_digital_A00_23217', layerIndex: 322 },
        { id: 'cheonan_digital_A00_23215', layerIndex: 323 },
        { id: 'cheonan_digital_A00_23212', layerIndex: 324 },
        { id: 'cheonan_digital_A00_23213', layerIndex: 325 },
        { id: 'cheonan_digital_A00_23119', layerIndex: 326 },
        { id: 'cheonan_digital_A00_53326', layerIndex: 327 },
        { id: 'cheonan_digital_A00_63321', layerIndex: 328 },
        { id: 'cheonan_digital_A00_33324', layerIndex: 329 },
        { id: 'cheonan_digital_A00_33327', layerIndex: 330 },
        { id: 'cheonan_digital_A00_93351', layerIndex: 331 },
        { id: 'cheonan_digital_A00_93352', layerIndex: 332 },
        { id: 'cheonan_digital_A00_43325', layerIndex: 333 }
    ];

    const regions = {
        gwangju: { center: [35.1595, 126.8526], zoom: 11 },  // 광주의 중심 좌표 및 줌 레벨
        cheonan: { center: [36.8154, 127.1523], zoom: 12 }   // 천안의 중심 좌표 및 줌 레벨
    };
    // 현재 지역 상태 저장
    let currentRegion = 'gwangju'; // 초기값: 광주
    let activeLayers = []; // 현재 활성화된 레이어들을 저장할 배열


    // 초기화 상태 저장
    const initialCheckboxState = {};
    layers.forEach(layerInfo => {
        initialCheckboxState[layerInfo.id] = false; // 모든 체크박스 기본값은 false
    });
    const initialDraggableListHTML = ''; // 초기 우선순위 리스트는 비어 있음

    // 모든 활성화된 레이어와 우선순위 리스트 초기화 및 복원
    function resetToInitialState() {
        // 지도에서 활성화된 레이어 제거
        activeLayers.forEach(layer => {
            map.removeLayer(layer);
        });
        activeLayers = []; // 활성화된 레이어 리스트 초기화

        // 체크박스 상태 초기화
        layers.forEach(layerInfo => {
            const checkbox = document.getElementById(layerInfo.id); // 왼쪽 체크박스
            const searchCheckbox = document.getElementById('search-' + layerInfo.id); // 검색 체크박스
            const initialState = initialCheckboxState[layerInfo.id];
            if (checkbox) checkbox.checked = initialState; // 초기 상태로 복원
            if (searchCheckbox) searchCheckbox.checked = initialState; // 초기 상태로 복원
        });

        // 우선순위 리스트 초기화
        const draggableList = document.getElementById('draggable-checkbox-list');
        draggableList.innerHTML = initialDraggableListHTML; // 초기 HTML로 복원
    }

    // 광주 메뉴 보이기
    document.getElementById('submenu-list').style.display = 'block';
    // 천안 메뉴 숨기기
    document.getElementById('submenu-list2').style.display = 'none';

    // 광주 버튼 클릭 시
    document.getElementById('btn-gwangju').addEventListener('click', function() {
        // 광주 중심으로 이동하고 줌 레벨 설정
        map.setView(regions.gwangju.center, regions.gwangju.zoom);
        currentRegion = 'gwangju'; // 현재 지역 설정
        document.getElementById('layer-search').value = ''; // 검색창 초기화
        resetToInitialState()
        filterList(); // 검색 결과 갱신
        // 광주 메뉴 보이기
        document.getElementById('submenu-list').style.display = 'block';

        // 천안 메뉴 숨기기
        document.getElementById('submenu-list2').style.display = 'none';
    });
    // 천안 버튼 클릭 시
    document.getElementById('btn-cheonan').addEventListener('click', function() {
        // 천안 중심으로 이동하고 줌 레벨 설정
        map.setView(regions.cheonan.center, regions.cheonan.zoom);
        currentRegion = 'cheonan'; // 현재 지역 설정
        document.getElementById('layer-search').value = ''; // 검색창 초기화
        resetToInitialState();
        filterList(); // 검색 결과 갱신
        // 천안 메뉴 보이기
        document.getElementById('submenu-list2').style.display = 'block';

        // 광주 메뉴 숨기기
        document.getElementById('submenu-list').style.display = 'none';
    });
    // 지도 생성
    var map = L.map('map').setView([35.1595, 126.8526], 13); // 위도, 경도, 줌 레벨 설정

    var vworldLayer = L.tileLayer('https://xdworld.vworld.kr/2d/Base/service/{z}/{x}/{y}.png', {
        "minZoom": 6,
        "maxZoom": 19,
        "maxNativeZoom": 19,
        "attribution": '&copy; <a href="http://www.vworld.kr/">vworld</a> contributors'
    });

    var hybrid = L.tileLayer(`http://api.vworld.kr/req/wmts/1.0.0/${vworldKey}/Hybrid/{z}/{y}/{x}.png`, {
        attribution: '&copy; VWorld',
        maxZoom: 19,
        minZoom: 6,
        zIndex: 10  // zIndex 설정
    });
    var satellite = L.tileLayer(`http://api.vworld.kr/req/wmts/1.1.1/${vworldKey}/Satellite/{z}/{y}/{x}.jpeg`, {
        attribution: '&copy; VWorld',
        maxZoom: 19,
        minZoom: 6,
        zIndex: 5  // zIndex 설정
    });
    vworldLayer.addTo(map);
    // 축척선 추가
    L.control.scale({ position: 'bottomright' }).addTo(map);

    // 일반지도, 위성지도 띄우는거 선택
    var general_map = document.getElementById('general_map');
    var satellite_map = document.getElementById('satellite_map');
    var satellite_true = true;
    general_map.addEventListener('click', function (){
        if(satellite){
            hybrid.remove();
            satellite.remove();
        }
        satellite_true = !satellite_true;
    })
    satellite_map.addEventListener('click', function (){
        // 상태에 따라 다른 작업 실행
        if (satellite_true) {
            console.log('True: 위성지도를 활성화');
            hybrid.addTo(map);
            satellite.addTo(map);
        }
        // 상태를 변경 (true <-> false)
        satellite_true = !satellite_true;
    })

    // 지도 컨테이너와 자식 요소들 가져오기
    const mapContainer = document.getElementById('map');
    const childElements = mapContainer.querySelectorAll('*'); // #map 아래의 모든 자식 요소 선택
    // 모달과 닫기 버튼 선택
    const modal = document.getElementById('modal');
    const modalClose = document.getElementById('modal-close');
    const modalContent = document.getElementById('modal-content');

    document.getElementById('modal').addEventListener('wheel', (e) => {
        e.stopPropagation();
    });

    // 각 자식 요소에 마우스 이벤트 추가
    childElements.forEach(element => {
        // 마우스가 자식 요소 위에 올라가면 지도 상호작용 비활성화
        element.addEventListener('mouseover', () => {
            map.dragging.disable();
            map.touchZoom.disable();
            map.doubleClickZoom.disable();
            map.scrollWheelZoom.disable();
            map.off('click')
        });

        // 마우스가 자식 요소에서 벗어나면 지도 상호작용 활성화
        element.addEventListener('mouseout', () => {
            map.dragging.enable();
            map.touchZoom.enable();
            map.doubleClickZoom.enable();
            map.scrollWheelZoom.enable();
            // 지도 클릭 이벤트
            map.on('click', function (e) {
                const { lat, lng } = e.latlng; // Leaflet 기준 좌표 가져오기
                modalContent.innerHTML = `<p>클릭한 위치의 좌표:</p><p>위도: ${lat.toFixed(5)}</p><p>경도: ${lng.toFixed(5)}</p>`;
                modal.style.display = 'block';
            });
        });
    });
    // 모달 닫기 이벤트
    modalClose.addEventListener('click', function (e) {
        modal.style.display = 'none';
    });

    // WMS 레이어 추가 함수
    function createWmsLayer(layerId, layerIndex) {
        const layer = L.tileLayer.wms('http://localhost:8080/geoserver/ne/wms', {
            layers: `ne:${layerId}`,  // 'ne:' 접두사 추가
            format: 'image/png',
            transparent: true,
            attribution: '&copy; GeoServer Contributors',
            zIndex: layerIndex  // 숫자로 zIndex 설정
        });
        layer.options.id = `ne:${layerId}`;
        return layer;
    }

    // 전체화면 버튼 구현
    const fullscreenButton = document.getElementById('fullscreenButton');
    fullscreenButton.addEventListener('click', () => {
        if (mapContainer.requestFullscreen) {
            mapContainer.requestFullscreen(); // 표준 API
        } else if (mapContainer.webkitRequestFullscreen) {
            mapContainer.webkitRequestFullscreen(); // Safari
        } else if (mapContainer.msRequestFullscreen) {
            mapContainer.msRequestFullscreen(); // IE/Edge
        } else {
            alert('전체화면 API가 지원되지 않는 브라우저입니다.');
        }
    });

    // 입지분석 레이어 on/off 버튼
    const analysisBtn = document.getElementById('analysisBtn');
    const analysisLayer = document.getElementById('analysis-layer');
    const analysisCancel = document.getElementById('analysis-cancel');
    analysisCancel.addEventListener('click', ()=>{
        if (analysisLayer.style.display === 'flex' || analysisLayer.style.display === '') {
            analysisLayer.style.display = 'none';
        }
    });
    analysisBtn.addEventListener('click', () => {
        if (analysisLayer.style.display === 'flex' || analysisLayer.style.display === '') {
            analysisLayer.style.display = 'none'; // 안 보이게 설정
        }
        else if (analysisLayer.style.display === 'none') {
            analysisLayer.style.display = 'flex'; // 보이게 설정
        }
    });

    document.addEventListener("DOMContentLoaded", () => {
        const tabs = document.querySelectorAll(".tab-button");
        const tabContents = document.querySelectorAll(".tab-content");

        // 탭 전환 기능
        tabs.forEach((tab) => {
            tab.addEventListener("click", () => {
                // 모든 탭 비활성화
                tabs.forEach((t) => t.classList.remove("active"));
                tabContents.forEach((content) => (content.style.display = "none"));

                // 선택한 탭 활성화
                tab.classList.add("active");
                const target = tab.getAttribute("data-tab");
                document.getElementById(target).style.display = "block";
            });
        });
    });

    // 레이어 배열을 돌면서 WMS 레이어 생성
    const layerInstances = {};  // 레이어 인스턴스를 저장할 객체
    console.log(layerInstances);

    // 레이어 추가 삭제
    layers.forEach(function(layerInfo) {
        const wmsLayer = createWmsLayer(layerInfo.id, layerInfo.layerIndex*10);
        layerInstances[layerInfo.id] = wmsLayer;  // WMS 레이어를 객체에 저장

        // 체크박스에 이벤트 리스너 추가
        var checkbox = document.getElementById(layerInfo.id);  // 왼쪽 체크박스를 찾음
        var rightCheckbox = document.getElementById('search-' + layerInfo.id);  // 오른쪽 체크박스 찾기

        checkbox.addEventListener('change', function(event) {
            if (event.target.checked) {
                map.addLayer(wmsLayer);  // Leaflet에서 레이어를 추가하는 방법
                activeLayers.push(wmsLayer);
                // 레이어 우선순위에 추가
                const ul = document.getElementById("draggable-checkbox-list");
                const newLi = document.createElement("li");
                newLi.setAttribute("draggable", "true");
                newLi.setAttribute("id", layerInfo.id + '-layer');

                const newBtn = document.createElement("button");
                newBtn.setAttribute("id", layerInfo.id);
                newBtn.setAttribute("class", "cancel-layer");

                const newDragImg = document.createElement("img");
                newDragImg.setAttribute("src", "/images/icons8-메뉴.svg");
                newDragImg.setAttribute("style", "width: 20px; height: 20px");
                newDragImg.setAttribute("draggable", "false");

                const newLabel = document.createElement("label");
                newLabel.setAttribute("for", layerInfo.id + '-label');

                var findName = layer_names.find(layer => layer.id === layerInfo.id);
                newLabel.textContent = findName.name;

                const newCancelImg = document.createElement("img");
                newCancelImg.setAttribute("src", "/images/icons8-취소.svg");
                newCancelImg.setAttribute("style", "width: 20px; height: 20px");
                newCancelImg.setAttribute("draggable", "false");

                newBtn.appendChild(newCancelImg);
                newLi.appendChild(newDragImg);
                newLi.appendChild(newLabel);
                newLi.appendChild(newBtn);
                ul.appendChild(newLi);
                // cancel 버튼 클릭 이벤트 추가
                newBtn.addEventListener('click', function() {
                    var searchBox = document.getElementById('search-' + layerInfo.id);
                    // li 태그 삭제
                    newLi.remove();

                    // 체크박스 해제
                    checkbox.checked = false;
                    if (searchBox !== null) {
                        searchBox.checked = false;
                    }

                    // WMS 레이어 제거
                    map.removeLayer(wmsLayer);  // Leaflet에서 지도에서 제거
                    activeLayers = activeLayers.filter(layer => layer !== wmsLayer);
                });
            } else {
                const div_layer = document.querySelector(`#${layerInfo.id}-layer`);
                if (div_layer)
                    div_layer.remove();
                map.removeLayer(wmsLayer);  // Leaflet에서 레이어를 제거하는 방법
                activeLayers = activeLayers.filter(layer => layer !== wmsLayer);
            }
            // 오른쪽 체크박스 상태 동기화
            if (rightCheckbox) {
                rightCheckbox.checked = checkbox.checked;
            }




        });

        // 오른쪽 체크박스의 상태가 바뀌었을 때 왼쪽 체크박스도 변경
        if (rightCheckbox) {
            rightCheckbox.addEventListener('change', function() {
                if (rightCheckbox.checked) {
                    checkbox.checked = true;  // 왼쪽 체크박스도 체크
                    map.addLayer(wmsLayer);   // Leaflet에서 레이어를 추가
                } else {
                    checkbox.checked = false; // 왼쪽 체크박스 해제
                    map.removeLayer(wmsLayer); // Leaflet에서 레이어를 제거
                }
            });
        }

        // 초기 상태를 체크박스에 맞춰 설정
        if (checkbox.checked) {
            map.addLayer(wmsLayer);  // 초기 상태가 체크되었으면 지도에 추가
            if (rightCheckbox) {
                rightCheckbox.checked = true;  // 오른쪽 체크박스도 체크
            }
        }
    });
    // 레이어 우선 순위
    draggableList.addEventListener('dragend', () => {
        if (draggedItem) {  // 드래그 항목이 있을 경우
            draggedItem.classList.remove('dragging');  // 드래그 중 스타일 제거
            if (placeholder) {  // 플레이스홀더가 존재할 경우
                placeholder.parentNode.replaceChild(draggedItem, placeholder);  // 플레이스홀더를 드래그 항목으로 교체
                placeholder = null;  // 플레이스홀더 제거
            }
            draggedItem = null;  // 드래그 항목 초기화

            // 모든 li 요소를 배열로 가져오기
            const items = Array.from(draggableList.querySelectorAll('li'));
            layer_list = [];  // 배열 초기화 (이전에 저장된 값들을 제거)

            items.forEach((item, index) => {
                const label = item.querySelector('label');  // li 안의 label 요소 선택
                const labelText = label.textContent.trim();  // label 텍스트 가져오기
                const id = item.id.slice(0, -6);  // ID에서 _layer 부분 제거
                layer_list.push({ index: 1000 - (index * 50), id: "ne:" + id, labelText: labelText });
            });

            // 현재 맵에 존재하는 레이어를 순회하면서 id가 일치하는 레이어의 zIndex를 수정
            map.eachLayer(function (layer) {
                const layerId = layer.options.id;  // Leaflet에서 레이어의 id는 options에 저장됩니다.
                console.log(`Layer ID: ${layerId}`);  // 레이어 ID 확인

                const matchingLayer = layer_list.find(item => item.id === layerId);

                if (matchingLayer) {
                    // 해당 레이어가 layer_list에 존재하면 zIndex 값을 수정
                    console.log(`Layer ${layerId} zIndex updated to ${matchingLayer.index}`);
                    layer.setZIndex(matchingLayer.index);  // zIndex 설정
                } else {
                    console.log(`No matching layer found for ${layerId}`);
                }
            });

            console.log('layer_list:', layer_list);  // 최종적으로 저장된 배열 출력
        }
    });

    // 메뉴 열고 닫기 토글 기능
    function toggleMenu() {
        const menu = document.getElementById('menu');
        const menuButton = document.getElementById('menu-button');
        menu.classList.toggle('hidden');
        menuButton.classList.toggle('hidden');
    }

    // 서브메뉴 열고 닫기 토글 기능
    function toggleSubmenu(event, element) {
        event.preventDefault();
        const listItem = element.parentElement;
        const submenu = listItem.querySelector('.submenu');
        if (submenu) {
            submenu.classList.toggle('active');
        }
    }
    // 검색 입력 필드에 이벤트 리스너 추가
    document.getElementById('layer-search').addEventListener('input', filterList);

    function filterList() {
        const keyword = document.getElementById('layer-search').value.trim().toLowerCase();
        const searchList = document.getElementById('search-list');

        if (keyword === '') {
            searchList.style.display = 'none'; // 검색어가 없으면 숨기기
            searchList.innerHTML = ''; // 리스트 초기화
            return;
        }

        searchList.style.display = 'block'; // 검색어가 있으면 표시
        searchList.innerHTML = ''; // 기존 검색 결과 초기화

        // 입력된 키워드와 일치하는 항목 필터링
        const filteredItems = layer_names.filter(item =>
            item.name.toLowerCase().includes(keyword)&&
            item.id.startsWith(currentRegion)); // 현재 지역에 해당하는 ID만 포함);););

        filteredItems.forEach(item => {
            const listItem = document.createElement('li');
            listItem.classList.add('check-item'); // li에 클래스 추가

            const span = document.createElement('span');
            span.classList.add('submenu-item');
            span.textContent = item.name; // 레이어 이름 표시

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.value = item.id;
            checkbox.id = 'search-' + item.id;
            checkbox.checked = document.getElementById(item.id)?.checked || false; // 기존 체크박스 상태 동기화

            listItem.appendChild(span);
            listItem.appendChild(checkbox);
            searchList.appendChild(listItem);

            // 기존 체크박스와 동기화
            checkbox.addEventListener('change', function (event) {
                const originalCheckbox = document.getElementById(item.id);
                originalCheckbox.checked = event.target.checked; // 원래 체크박스 상태 동기화

                // 기존 이벤트 트리거
                originalCheckbox.dispatchEvent(new Event('change'));
            });
        });
    }

    var category_kiosk = document.getElementById('category-issuingMachine');
    category_kiosk.addEventListener('click',function (){
        var data = {
            name: 'kiosk_20_05',  // 필요에 맞게 수정
        };

        // 비동기 POST 요청
        fetch('/json', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data) // 데이터 요청 본문에 포함
        })
            .then(response => {
                if (response.ok) {
                    return response.json();  // 응답을 JSON으로 파싱
                } else {
                    return Promise.reject('서버 응답 실패');
                }
            })
            .then(responseData => {
                console.log(responseData);  // 응답 데이터 확인

                // 응답 데이터에서 'data' 배열을 가져옵니다.
                const kiosks = responseData.data;

                // 'total_score'로 내림차순 정렬하여 상위 5개 항목만 추출
                const topKiosks = kiosks
                    .sort((a, b) => b.total_score - a.total_score)  // total_score 기준 내림차순 정렬
                    .slice(0, 5);  // 상위 5개 항목만 선택

                // topKiosks 배열을 순회하면서 각 kiosk 객체에 대해 마커를 추가합니다.
                topKiosks.forEach(kiosk => {
                    var lat = kiosk.lat;  // 위도
                    var lng = kiosk.lon;  // 경도
                    var popupContent = `여기는 ${kiosk.name || '이름 없음'}입니다!`;  // 팝업 내용은 kiosk의 name을 사용

                    // 마커 추가
                    L.marker([lat, lng])
                        .addTo(map)
                        .bindPopup(popupContent)  // 팝업 내용 추가
                        .openPopup();  // 팝업 열기 (필요하면 이 줄을 삭제하여 팝업을 열지 않을 수 있음)
                });
            })
            .catch(error => {
                console.error('Error:', error);  // 오류 발생 시 콘솔에 출력
            });
    })
</script>
</body>
</html>
