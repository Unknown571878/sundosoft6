<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>게시물 상세</title>
</head>
<body>
<h1>게시물 상세</h1>
<form id="frm" method="post">
  <input type="hidden" name="id" th:value="${notice.id}" />
<table class="board_detail">
  <tbody>
  <tr>
    <th>글 번호</th>
    <td th:text="${notice.id }"></td>
    <th>조회수</th>
    <td th:text="${notice.hits }"></td>
  </tr>
  <tr>
    <th>작성일</th>
    <td th:text="${#temporals.format(notice.createdAt, 'yyyy/MM/dd HH:mm')}"></td>
  </tr>
  <tr>
    <th>제목</th>
    <td colspan="3"><input type="text" id="title" name="title" th:value="${notice.title }"
                           th:attr="readonly=${session.authInfo == null || session.authInfo.role != 'ADMIN'}"/></td>
  </tr>
  <tr>
    <th>내용</th>
    <td colspan="3"><textarea title="내용" id="content" name="content" th:text="${notice.content }"
                              th:attr="readonly=${session.authInfo == null || session.authInfo.role != 'ADMIN'}"></textarea>
    </td>
  </tr>
  </tbody>
</table>
</form>
<div>
<a href="#this" id="list" class="btn" >목록으로</a>
<a href="#this" id="edit" class="btn" th:if="${session.authInfo.role == 'ADMIN'}">수정하기</a>
<a href="#this" id="delete" class="btn" th:if="${session.authInfo.role == 'ADMIN'}">삭제하기</a>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $("#list").on("click", function(){
      location.href = "/noticeList";
    });

    $("#edit").on("click", function(){
      var frm = $("#frm")[0];
      frm.action = "/updateNotice";
      frm.submit();
    });

    $("#delete").on("click", function(){
      var frm = $("#frm")[0];
      frm.action = "/deleteNotice";
      frm.submit();
    });
  });
</script>
</div>
</body>
</html>
